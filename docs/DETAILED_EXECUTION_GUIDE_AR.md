# ุฏููู ุงูุชูููุฐ ุงูุชูุตููู - ุฎุทูุฉ ุจุฎุทูุฉ ๐๏ธ

ูุฐุง ุงูููู ูุญุชูู ุนูู "ุชูุงุตูู ุงูุชูุงุตูู" ููู ูููุฉุ ูุน ุงูุฃูุงูุฑ ูุงูุฎุทูุงุช ุงูุฏูููุฉุ ููุตุงุฆุญ ุฐูุจูุฉ ูุชูููุฑ ุงูุชูููุฉ (Free Tier).

---

## ๐ฐ ูุตุงุฆุญ ุฐูุจูุฉ ููู Free Tier (ุนุดุงู ูุชุฏูุนูุด ูููุณ) ๐ธ

1.  **ูุงุนุฏุฉ ุงูู "Stop" ุงูููุฏุณุฉ**:
    *   ุฃู ููุช ูุด ุจุชุดุชุบููุง ููู (ุจุชูุงููุงุ ุจุชุงูููุงุ ูู ุงููุญุงุถุฑุงุช)ุ ูุงุฒู ุชุนูููุง **Stop Instances** ููู ุงูุณูุฑูุฑุงุช ูู AWS Console.
    *   ุงูู Stop ูุด ุจููุณุญ ุงูุฏุงุชุงุ ูู ุจุณ ุจูููู ุนุฏุงุฏ ุงูุณุงุนุงุช.
    *   **ุชุญุฐูุฑ**: ุงูู Terminate ุจููุณุญ ุงูุณูุฑูุฑ ููุงุฆู! ุงุณุชุฎุฏููุง Stop ุจุณ.

2.  **Elastic IPs**:
    *   AWS ุจุชุฏูู 750 ุณุงุนุฉ ูุฌุงููุฉ ููู EC2ุ ููู ุงูู Elastic IP (ุงูู IP ุงูุซุงุจุช) ุจูููุณ ูู ุงูุณูุฑูุฑ ูุงูู!
    *   **ุงูุญู**: ููุง ุชุนูููุง Stop ููุณูุฑูุฑุงุชุ ูุงุฒู ุชุนูููุง **Release Elastic IP** ูู ุญุงุฌุฒูู ูุงุญุฏ. ุฃู ุงูุฃูุถูุ ูุชุณุชุฎุฏููุด Elastic IP ูุงุนุชูุฏูุง ุนูู ุงูู Public IP ุงููุชุบูุฑ (ุจุณ ูุชุถุทุฑูุง ุชุญุฏุซูุง ููู `hosts` ูู ูุฑุฉ ุชุดุบููุง ูููุง ุงูุณูุฑูุฑุงุช).

3.  **ููุน ุงูุณูุฑูุฑุงุช**:
    *   ุงุณุชุฎุฏููุง `t2.micro` ูู ุจุชุฌุฑุจูุง ุญุงุฌุงุช ุจุณูุทุฉ.
    *   ูุดุฑูุนูุง ูุญุชุงุฌ `t2.medium` (ุนุดุงู ุงูู Kubernetes ุชููู). ุฏู **ูุด Free Tier**!
    *   **ุงูุญู**: ุนุดุงู ูุฏู ูุงุฒู ุงูู Stop ูููู ููุฑุงู ุจุนุฏ ูุง ุชุฎูุตูุง ุดุบู. ูู ุงุดุชุบูุชูุง 4 ุณุงุนุงุช ูู ุงูููู ููุฏุฉ 4 ุฃูุงู = 16 ุณุงุนุฉ ร 3 ุณูุฑูุฑุงุช = 48 ุณุงุนุฉ. ุฏู ุชูููุชู ุจุณูุทุฉ ุฌุฏุงู (ุณูุชุงุช). ููู ูู ุณุจุชูู ุดุบุงู 24 ุณุงุนุฉ ูุชุฒุนููุง.

4.  **ุชูุธูู ุงูููุงุฑุฏ (Cleanup)**:
    *   ุฃูู ูุง ุงููุดุฑูุน ูุชุณููุ ุงุนูููุง **Terminate** ููู ุงูุณูุฑูุฑุงุชุ ูุงูุณุญูุง ุงูู ECR Imagesุ ูุงูู EBS Volumes.

---

## ๐ ุงูููู ุงูุฃูู: ุงูุชุฃุณูุณ (Foundation)

### ๐ค 1. ู. ุงูุจููุฉ ุงูุชุญุชูุฉ (Infrastructure)
**ุงููููุฉ**: ุนูู 3 ุณูุฑูุฑุงุช ูุชุฌููุฒูู.

**ุงูุฎุทูุงุช ุจุงูุชูุตูู:**
1.  ุงุฏุฎู ุนูู AWS Console -> EC2 -> Launch Instance.
2.  **ุงูุงุณู**: ุณูููู `k8s-master`, `k8s-worker1`, `k8s-worker2`.
3.  **ูุธุงู ุงูุชุดุบูู**: ุงุฎุชุงุฑ `Ubuntu Server 22.04 LTS`.
4.  **ููุน ุงูุณูุฑูุฑ**: ุงุฎุชุงุฑ `t2.medium` (ุถุฑูุฑู ุนุดุงู ุงูู Master ูุญุชุงุฌ 2 CPU).
5.  **ุงูููุชุงุญ (Key Pair)**:
    *   Create new key pair -> ุณููู `vprofile-key` -> ููุน `.pem`.
    *   ุญูู ุงูููู ูุงุจุนุชู ููู ุงูุชูู ุนูู ุงูุฌุฑูุจ.
6.  **ุงูุดุจูุฉ (Security Group)**:
    *   Create security group -> ุณููู `vprofile-sg`.
    *   ุถูู ุงูู Inbound Rules ุฏู (ููู ุฌุฏุงู):
        *   `SSH` (Port 22) -> Source: My IP (ููู ุดููุฉ ุถูู IPs ุฒูุงููู).
        *   `All Traffic` -> Source: Custom -> ุงุฎุชุงุฑ ููุณ ุงูู Security Group (`vprofile-sg`). (ุฏู ุนุดุงู ุงูุณูุฑูุฑุงุช ุชููู ุจุนุถูุง ุจุญุฑูุฉ).
        *   `Custom TCP` (Port 30000-32767) -> Source: Anywhere (ุนุดุงู ุชูุชุญูุง ุงูุชุทุจูู ูู ุงููุชุตูุญ).
7.  ุฏูุณ **Launch**.

### ๐ค 2. ู. ุงูุฃุชูุชุฉ (Ansible)
**ุงููููุฉ**: ุชุฌููุฒ ุงุชุตุงู Ansible.

**ุงูุฎุทูุงุช ุจุงูุชูุตูู:**
1.  ูุฒู ุงูููู `vprofile-key.pem` ุงููู ุฒูููู ุจุนุชู.
2.  ุบูุฑ ุตูุงุญูุงุชู (ุนุดุงู ูุดุชุบู): `chmod 400 vprofile-key.pem`.
3.  ุงุฏุฎู ุนูู ููู `ansible/inventory/hosts` ูู ุงููุดุฑูุน.
4.  ูุงุช ุงูู Public IP ุจุชุงุน ูู ุณูุฑูุฑ ูู AWS Console ูุงูุชุจูู ูู ุงูููู ูุฏู:
    ```ini
    [master]
    k8s-master ansible_host=54.x.x.x ansible_user=ubuntu ansible_ssh_private_key_file=path/to/vprofile-key.pem

    [workers]
    k8s-worker1 ansible_host=35.x.x.x ansible_user=ubuntu ansible_ssh_private_key_file=path/to/vprofile-key.pem
    k8s-worker2 ansible_host=13.x.x.x ansible_user=ubuntu ansible_ssh_private_key_file=path/to/vprofile-key.pem
    ```
5.  ุฌุฑุจ ุงูุงุชุตุงู: `ansible all -i ansible/inventory/hosts -m ping`.
    *   ูู ุฑุฏ ุจู `pong` ูุจูู ุฃูุช ุจุฑูุณ! ๐

---

## ๐ ุงูููู ุงูุซุงูู: ุจูุงุก ุงูู Cluster

### ๐ค 2. ู. ุงูุฃุชูุชุฉ (ุชูููุฉ)
**ุงููููุฉ**: ุชุดุบูู ุงูู Playbooks.

**ุงูุฎุทูุงุช ุจุงูุชูุตูู:**
1.  ุดุบู ุฃูู Playbook (ุชุฌููุฒ ุงูููุฏุฒ):
    ```bash
    ansible-playbook -i ansible/inventory/hosts ansible/playbooks/prepare-nodes.yml
    ```
    *   ุฏู ููุณุทุจ Docker ู K8s tools ููููู ุงูู Swap.
2.  ุดุบู ุชุงูู Playbook (ุจูุงุก ุงูููุงุณุชุฑ):
    ```bash
    ansible-playbook -i ansible/inventory/hosts ansible/playbooks/kubeadm-init.yml
    ```
    *   ุฏู ููุดุบู ุงูู Master ููุฑุจุท ุงูู Workers ุจูู.

### ๐ค 3. ู. ุงูููุจุฑููุชุณ (Docker & ECR)
**ุงููููุฉ**: ุฑูุน ุงูุชุทุจูู.

**ุงูุฎุทูุงุช ุจุงูุชูุตูู:**
1.  ุงุฏุฎู AWS Console -> ECR -> Create Repository.
    *   ุณููู `vprofile-app`.ECR
2.  ุนูู ุฌูุงุฒูุ ุงุนูู Build ููู Docker Image:
    ```bash
    docker build -t vprofile-app:v1 .
    ```
3.  ุงุฑูุนูุง ุนูู AWS (ูุชูุงูู ุฃูุงูุฑ ุงูู Push ุฌูู ุตูุญุฉ ุงูู ECR ูู AWSุ ุงูุณุฎูุง ูููุฐูุง):
    *   Login command.
    *   Tag command.
    *   Push command.
4.  ุฎุฏ ุฑุงุจุท ุงูุตูุฑุฉ (URI) ูุงุฏูู ูุฒูููู ุนุดุงู ูุญุทู ูู ูููุงุช ุงูู YAML.

---

## ๐ ุงูููู ุงูุซุงูุซ: ุงููุดุฑ (Deployment)

### ๐ค 3. ู. ุงูููุจุฑููุชุณ (ุชุฌููุฒ ุงููููุงุช)
**ุงููููุฉ**: ุชุญุฏูุซ ูููุงุช ุงูู YAML.

**ุงูุฎุทูุงุช ุจุงูุชูุตูู:**
1.  ุงูุชุญ ููู `k8s/deployments/vproapp.yaml`.
2.  ุฏูุฑ ุนูู ุงูุณุทุฑ ุงููู ููู `image:`.
3.  ุดูู ุงูุงุณู ุงููุฏูู ูุญุท ุฑุงุจุท ุงูู ECR ุงููู ูุณู ูุนููู (ูุซูุงู: `123456.dkr.ecr.../vprofile-app:v1`).
4.  ุงุญูุธ ุงูููู.

### ๐ค 2. ู. ุงูุฃุชูุชุฉ (ุงููุดุฑ)
**ุงููููุฉ**: ุชุดุบูู ุงูุชุทุจูู.

**ุงูุฎุทูุงุช ุจุงูุชูุตูู:**
1.  ุดุบู Playbook ุงููุดุฑ:
    ```bash
    ansible-playbook -i ansible/inventory/hosts ansible/playbooks/deploy-vprofile.yml
    ```
2.  ุงุณุชูู ุดููุฉุ ูุจุนุฏูู ุงุฏุฎู ุนูู ุงูู Master (SSH) ูุดูู ุงูุญุงูุฉ:
    ```bash
    kubectl get pods -n vprofile
    ```
    *   ูุงุฒู ูููู ูููููุง `Running`. ูู ููู `Error` ุฃู `CrashLoopBackOff`ุ ูุงุฏู ุนูู ู. ุงูููุจุฑููุชุณ ูุญููุง.

---

## ๐ ุงูููู ุงูุฑุงุจุน: ุงูููุณุงุช ุงูุฃุฎูุฑุฉ

### ๐ค 5. ู. ุงููุฑุงูุจุฉ (Monitoring)
**ุงููููุฉ**: ุชุดุบูู Prometheus.

**ุงูุฎุทูุงุช ุจุงูุชูุตูู:**
1.  ุดุบู Playbook ุงููุฑุงูุจุฉ:
    ```bash
    ansible-playbook -i ansible/inventory/hosts ansible/playbooks/monitoring.yml
    ```
2.  ูุงุช ุงูุจุงุณูุฑุฏ ุจุชุงุน Grafana ูู ุงูู Output ุจุชุงุน ุงูู Ansible.
3.  ุงูุชุญ ุงููุชุตูุญ ุนูู: `http://<ANY_WORKER_IP>:30080`.
4.  ุงุฏุฎู ุจู `admin` ูุงูุจุงุณูุฑุฏ ุงููู ูุนุงู.
5.  ูุจุฑูู! ุนูุฏู ุฏุงุดุจูุฑุฏ ูุงููุฉ.

---

## ๐จ ุณููุงุฑูู ุงูุทูุงุฑุฆ (ูู ุญุงุฌุฉ ุจุงุธุช)

*   **ุงูุณูุฑูุฑ ูุด ุฑุงุถู ูุฏุฎู SSH**:
    *   ุงุชุฃูุฏ ุฅู ุงูู Security Group ูุงุชุญุฉ ุจูุฑุช 22 ููู IP ุจุชุงุนู (ุงูู IP ุจุชุงุนู ุจูุชุบูุฑ ูู ูุง ุชุนูู ุฑูุณุชุงุฑุช ููุฑุงูุชุฑ!).
*   **ุงูู Pods ูุด ุจุชููู**:
    *   ุงุณุชุฎุฏู `kubectl describe pod <pod-name> -n vprofile`. ุงูุฑุฃ ุงูุฑุณุงูุฉ ุงููู ุชุญุช ุฎุงูุต (Events). ุบุงูุจุงู ูุชููู ูุดููุฉ ูู ุงุณู ุงูุตูุฑุฉ ุฃู ุงูู Secrets.
*   **ูุณูุชูุง ุชุนูููุง Stop ููุณูุฑูุฑุงุช**:
    *   ุงุฏุฎููุง ููุฑุงู ุงุนูููุง Stop. ูุงุฏุนูุง ุฑุจูุง ุงููุงุชูุฑุฉ ูุชูููุด ูุจูุฑุฉ. ๐

---

ุจุงูุชูููู ูุง ุดุจุงุจ! ุงูุดูุง ุนูู ุงูุฎุทูุงุช ุฏู ุจุงูุญุฑู ูุฅู ุดุงุก ุงููู ุงููุดุฑูุน ูุฎูุต ูู ููุช ููุงุณู. ๐
